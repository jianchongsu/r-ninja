相关系数
========================================================


**协方差** 是带有着本身变量的量纲的，如果我们比较两个变量的关系，往往会受到各自量纲的影响，比如计算**协方差**。而**相关系数**相当于将变量经过***标准化***之后再对两个变量求**协方差**，所以其值的大小可以反映两个变量之间的相关关系。
由***Schwarz Inequality***可得，两个变量的**相关系数** 的绝对值是不超过***1***的。

* 如果其绝对值为***1***，则表明两个经过***标准化***的变量存在线性关系。

* 如果其值为***0***，则表示两个变量__不相关__，线性关系不明显，但不代表不存在***其他关系***。

* *相关性*与*独立性*，***独立必相关***，反之不对，但是在*正态*时反之正确！

下面我们来看看x与x^2 的相关关系情况。

#### 实例1


```r
set.seed(12)
x1 = sample(1:10000, 1000, T)
y1 = x1^2

cor(y1, x1)
```

```
## [1] 0.968
```

其线性相关程度竟然如此之高，原因可能是x1增加的时候，x1^2 也增加，两者是正相关，所以导致两个相关系数较大。

```r
plot(y1 ~ x1, col = colors()[55])
# title(expression(paste(x, '和',x^2,'的感情')))
abline(lm(y1 ~ x1), col = "blue")
```

![plot of chunk unnamed-chunk-2](figure/unnamed-chunk-2.png) 



```r
summary(lm(y1 ~ x1))
```

```
## 
## Call:
## lm(formula = y1 ~ x1)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -8133942 -6608344 -2264470  5574187 17104634 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(>|t|)    
## (Intercept) -1.65e+07   4.66e+05   -35.4   <2e-16 ***
## x1           9.93e+03   8.15e+01   121.8   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
## 
## Residual standard error: 7350000 on 998 degrees of freedom
## Multiple R-squared: 0.937,	Adjusted R-squared: 0.937 
## F-statistic: 1.48e+04 on 1 and 998 DF,  p-value: <2e-16 
## 
```

线性回归还通过了检验！！

#### 实例2：正态时
由于标准正态的奇数__原点矩__都为***零***。所以服从*标准正态分布* 的x与x^2 的相关性原则上应该接近 ***零***。

```r
x2 = rnorm(1000)
y2 = x2^2
cor(y2, x2)
```

```
## [1] 0.04364
```

果然相关系数比较小！

